(this["webpackJsonpgoit-react-hw-07-phonebook"]=this["webpackJsonpgoit-react-hw-07-phonebook"]||[]).push([[0],{121:function(t,e,n){"use strict";n.r(e);n(69);var o,c,a=n(0),r=n.n(a),s=n(17),i=n.n(s),u=n(10),l=n(36),b=n(7),d=n(19),j=n(55),O=n.n(j),h=n(56),p=n.n(h),f=n(8),C=n(6),g={onFetchContactsRequest:Object(b.b)("phonebook/FETCH_CONTACTS_R"),onFetchContactsSuccess:Object(b.b)("phonebook/FETCH_CONTACTS_S"),onFetchContactsFailure:Object(b.b)("phonebook/FETCH_CONTACTS_F"),onAddContactRequest:Object(b.b)("phonebook/ADD_CONTACT_R"),onAddContactSuccess:Object(b.b)("phonebook/ADD_CONTACT_S"),onAddContactFailure:Object(b.b)("phonebook/ADD_CONTACT_F"),onDeleteContactRequest:Object(b.b)("phonebook/DELETE_CONTACT_R"),onDeleteContactSuccess:Object(b.b)("phonebook/DELETE_CONTACT_S"),onDeleteContactFailure:Object(b.b)("phonebook/DELETE_CONTACT_F"),onToggleFavouriteRequest:Object(b.b)("phonebook/TOGGLE_FAVOURITE_R"),onToggleFavouriteSuccess:Object(b.b)("phonebook/TOGGLE_FAVOURITE_S"),onToggleFavouriteFailure:Object(b.b)("phonebook/TOGGLE_FAVOURITE_F"),onChangeFilter:Object(b.b)("phonebook/FILTER_CONTACT")},m=[],_="",v=!1,F=Object(b.c)(m,(o={},Object(C.a)(o,g.onFetchContactsSuccess,(function(t,e){return e.payload})),Object(C.a)(o,g.onAddContactSuccess,(function(t,e){e.type;var n=e.payload;return[].concat(Object(l.a)(t),[n])})),Object(C.a)(o,g.onDeleteContactSuccess,(function(t,e){e.type;var n=e.payload;return t.filter((function(t){return t.id!==n}))})),Object(C.a)(o,g.onToggleFavouriteSuccess,(function(t,e){e.type;var n=e.payload;return t.map((function(t){return t.id===n.id?n:t}))})),o)),x=Object(b.c)(v,(c={},Object(C.a)(c,g.onAddContactRequest,(function(){return!0})),Object(C.a)(c,g.onAddContactSuccess,(function(){return!1})),Object(C.a)(c,g.onAddContactFailure,(function(){return!1})),Object(C.a)(c,g.onDeleteContactRequest,(function(){return!0})),Object(C.a)(c,g.onDeleteContactSuccess,(function(){return!1})),Object(C.a)(c,g.onDeleteContactFailure,(function(){return!1})),Object(C.a)(c,g.onToggleFavouriteRequest,(function(){return!0})),Object(C.a)(c,g.onToggleFavouriteSuccess,(function(){return!1})),Object(C.a)(c,g.onToggleFavouriteFailure,(function(){return!1})),Object(C.a)(c,g.onFetchContactsRequest,(function(){return!0})),Object(C.a)(c,g.onFetchContactsSuccess,(function(){return!1})),Object(C.a)(c,g.onFetchContactsFailure,(function(){return!1})),c)),T=Object(b.c)(_,Object(C.a)({},g.onChangeFilter,(function(t,e){e.type;return e.payload}))),S=Object(f.c)({contacts:F,filter:T,loading:x}),k=Object(f.c)({phonebook:S}),A={key:"react_phonebook",storage:O.a},N=Object(d.g)(A,k),R=[].concat(Object(l.a)(Object(b.d)({serializableCheck:{ignoredActions:[d.a,d.f,d.b,d.c,d.d,d.e]}})),[p.a]),y=Object(b.a)({reducer:N,middleware:R,devTools:!0}),D=Object(d.h)(y),E=n(57),L=(n(80),n(81),n(23)),q=n(64),w=n(37),B=n(140),P=n(139),G=n(21),H=(n(82),function(t){return G.b.error("".concat(t),{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}),V=n(24),z=n.n(V);z.a.defaults.baseURL="http://localhost:4000";var I={fetchContactOperation:function(t){return function(t){t(g.onFetchContactsRequest()),z.a.get("/contacts").then((function(e){var n=e.data;return t(g.onFetchContactsSuccess(n))})).catch((function(e){H(e.message),t(g.onFetchContactsFailure(e))}))}},addContactOperation:function(t){return function(e){var n=Object(L.a)(Object(L.a)({},t),{},{favourite:!1});e(g.onAddContactRequest()),z.a.post("/contacts",n).then((function(t){var n=t.data;return e(g.onAddContactSuccess(n))})).catch((function(t){H(t.message),e(g.onAddContactFailure(t))}))}},deleteContactOperation:function(t){return function(e){e(g.onDeleteContactRequest()),z.a.delete("/contacts/".concat(t)).then((function(){return e(g.onDeleteContactSuccess(t))})).catch((function(t){H(t.message),e(g.onDeleteContactFailure(t))}))}},toggleContactFavourite:function(t){var e=t.id,n=t.favourite;return function(t){t(g.onToggleFavouriteRequest());var o={favourite:n};z.a.patch("/contacts/".concat(e),o).then((function(e){var n=e.data;return t(g.onToggleFavouriteSuccess(n))})).catch((function(e){H(e.message),t(g.onToggleFavouriteFailure(e))}))}}},J=n(20),U=function(t){return t.phonebook.contacts},Z=function(t){return t.phonebook.filter},M={contactsSelector:U,filterSelector:Z,isLoadingSelector:function(t){return t.phonebook.loading},contactsReselect:Object(J.a)(U,(function(t){return t})),filteredContactsSelector:Object(J.a)([U,Z],(function(t,e){var n=e.toLowerCase();return t.filter((function(t){return t.name.toLowerCase().includes(n)||t.number.toLowerCase().includes(n)}))}))},X=n(2),$=function(){var t=Object(u.c)(M.contactsReselect),e=Object(u.b)(),n=Object(a.useState)({name:"",number:"+380"}),o=Object(q.a)(n,2),c=o[0],r=o[1],s=function(t){var e=t.target,n=e.name,o=e.value;r(Object(L.a)(Object(L.a)({},c),{},Object(C.a)({},n,o.charAt(0).toUpperCase()+o.slice(1))))},i=function(n){var o=n.name,c=n.number,a=/^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$/.test(o),s=/(\+?( |-|\.)?\d{1,2}( |-|\.)?)?(\(?\d{3}\)?|\d{3})( |-|\.)?(\d{3}( |-|\.)?\d{4})/.test(c);t.some((function(t){return t.name===o}))?function(t){G.b.warn("".concat(t," is already in contacts!"),{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0})}(o):!0!==a?G.b.error("The name can only consist of letters, apostrophes, dashes and spaces.",{position:"top-right",autoClose:3e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):!0!==s?G.b.error("The phone number must be 11-12 digits long and can contain numbers, spaces, dashes, pot-bellied brackets and can start with +",{position:"top-right",autoClose:5e3,hideProgressBar:!1,closeOnClick:!0,pauseOnHover:!0,draggable:!0,progress:void 0}):(e(I.addContactOperation({name:o,number:c})),r({name:"",number:"+380"}))};return Object(X.jsxs)(X.Fragment,{children:[Object(X.jsxs)("form",{className:w.contact_form,noValidate:!0,autoComplete:"off",onSubmit:function(t){t.preventDefault(),i(c)},children:[Object(X.jsx)(B.a,{placeholder:"Name",className:w.form_input,inputProps:{"aria-label":"contact name"},type:"text",onChange:s,name:"name",value:c.name,id:"name",required:!0,variant:"outlined"}),Object(X.jsx)(B.a,{placeholder:"Number",className:w.form_input,inputProps:{"aria-label":"contact number"},type:"tel",onChange:s,name:"number",value:c.number,id:"number",required:!0}),Object(X.jsx)(P.a,{variant:"contained",type:"submit",children:"Add contact"})]}),Object(X.jsx)(G.a,{})]})},K=n(58),Q=function(){var t=Object(u.c)(M.filterSelector),e=Object(u.b)();return Object(X.jsx)("div",{children:Object(X.jsx)(B.a,{type:"text",placeholder:"Search contact",name:"filter",value:t,onChange:function(t){return e(g.onChangeFilter(t.target.value))},className:K.filter_input})})},W=n(31),Y=n(59),tt=n.n(Y),et=n(61),nt=n.n(et),ot=n(60),ct=n.n(ot),at=n(38),rt=function(){var t=Object(u.b)(),e=Object(u.c)(M.filteredContactsSelector);Object(a.useEffect)((function(){t(I.fetchContactOperation())}),[]);return Object(X.jsx)(X.Fragment,{children:e.length?Object(X.jsx)("ol",{className:W.contact_list,children:e.map((function(e){var n=e.name,o=e.number,c=e.id,a=e.favourite;return Object(X.jsxs)("li",{className:W.contact_item,children:[Object(X.jsxs)("p",{className:W.contact_text,children:[Object(X.jsx)("span",{children:n}),Object(X.jsx)("span",{children:o})]}),Object(X.jsxs)("div",{className:W.button_group,children:[Object(X.jsx)(P.a,{className:"delete-button",onClick:function(){return function(e){return t(I.deleteContactOperation(e))}(c)},children:Object(X.jsx)(tt.a,{color:"disabled"})}),Object(X.jsx)(P.a,{className:"favourite-button",onClick:function(){return e={id:c,favourite:!a},t(I.toggleContactFavourite(e));var e},children:a?Object(X.jsx)(ct.a,{style:{color:at.a[500]}}):Object(X.jsx)(nt.a,{color:"disabled"})})]})]},n)}))}):Object(X.jsx)("p",{children:"Contact list is empty"})})},st=n(62),it=n.n(st),ut=n(63),lt=function(){return Object(X.jsx)("div",{children:Object(X.jsx)(it.a,{type:"Circles",color:"#00BFFF",height:150,width:150,timeout:3e3,className:ut.loader})})},bt=function(){var t=Object(u.c)(M.isLoadingSelector),e=Object(u.c)(M.contactsSelector).length;return Object(X.jsxs)("div",{className:"container",children:[t&&Object(X.jsx)(lt,{}),Object(X.jsxs)("div",{style:t?{filter:"blur(20px)"}:null,children:[Object(X.jsx)("h1",{children:"Phonebook"}),Object(X.jsx)($,{}),e>0&&Object(X.jsxs)(X.Fragment,{children:[Object(X.jsx)("h2",{children:"Contacts"}),Object(X.jsx)(Q,{}),Object(X.jsx)(rt,{})]})]})]})};i.a.render(Object(X.jsx)(u.a,{store:y,children:Object(X.jsx)(E.a,{loading:null,persistor:D,children:Object(X.jsx)(r.a.StrictMode,{children:Object(X.jsx)(bt,{})})})}),document.getElementById("root"))},31:function(t,e,n){t.exports={contact_list:"ContactList_contact_list__CJczP",contact_item:"ContactList_contact_item__xXGrq",contact_text:"ContactList_contact_text__1N-2B",button_group:"ContactList_button_group__TSjFJ"}},37:function(t,e,n){t.exports={contact_form:"Form_contact_form__2kgVi",form_input:"Form_form_input__3p7qB"}},58:function(t,e,n){t.exports={filter_input:"Filter_filter_input__19JVD"}},63:function(t,e,n){t.exports={loader:"Loader_loader__2hZcM"}},69:function(t,e,n){},80:function(t,e,n){}},[[121,1,2]]]);
//# sourceMappingURL=main.a3adc345.chunk.js.map